#############################################
# Raptor 2.0 â€“ Environment configuration
#############################################
# Detect HOME dynamically (works on both macOS and Ubuntu)
export HOME="${HOME:-$(eval echo ~)}"

if [ "$(uname)" = "Darwin" ]; then
  export DOCKER_COMPOSE_WORKDIR="$HOME/Software/docker-env"
# Linux / Ubuntu
else
  export DOCKER_COMPOSE_WORKDIR="/srv/docker"
fi

# Then safely define XAUTHORITY
export XAUTHORITY="$HOME/.Xauthority"
export DISPLAY=":0"
export DATABASE_URL="postgres://admin:1234@localhost:5432/vehicles"
export KAFKA_BROKER="localhost:9094"

export MAC_RAPTOR_HOME="/Users/matkat/Software/JavaScript/mobile-crawler"
export UBUNTU_RAPTOR_HOME="/home/matkat/mobile-crawler"
export MAC_CRAWLER_HOME="/Users/matkat/Software/docker-env/crawler"
export UBUNTU_CRAWLER_HOME="/home/matkat/crawler-app"

export SLACK_NOTIFICATIONS_ENABLED=true
# Limit Slack messages to prevent 429 errors (max messages per minute)
export SLACK_MAX_MESSAGES_PER_MINUTE=10

# Scheduler settings
export RAPTOR_SCHEDULER_POLL_SECONDS=300            # how often to poll service status
export RAPTOR_SERVICE_INTERVAL_HOURS=24             # restart non-permanent services every 24h
export RAPTOR_SERVICE_MAX_RUNTIME_MINUTES=0         # 0 disables forced stop, set >0 to enforce
export RAPTOR_PERMANENT_SERVICE="mobile_de"

export LAUNCHER_YAML_PATH="$HOME/Software/Erlang/raptor-launcher/devops/launcher.yml"